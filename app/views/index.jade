html
  head
    - var title = title || 'Exchange Volumes'
    title= title
    link(rel='stylesheet', href='/css/app.css')
  body
    div#container(style="height: 800px;")

    script(src='//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js')
    script(src='https://code.jquery.com/jquery-3.1.1.min.js')
    script(src='https://code.highcharts.com/stock/highstock.js')
    script(src='https://code.highcharts.com/stock/modules/exporting.js')
    script(src='https://code.highcharts.com/stock/modules/export-data.js')

    script.
      jQuery(document).ready(function($) {
          $.ajax({
              datatype: "json",
              url: "http://localhost:3000/charts/all",
          }).done(function(response) {
              console.log(response);
              buildCharts(response);
          }).fail(function(){
              console.log('Ajax failed to get chart data');
          });

          // Move to repsective file
          function buildCharts(chartData) {
              Highcharts.stockChart('container', {
                  rangeSelector: {
                      selected: 1
                  },
                  plotOptions: {
                      area: {
                          stacking: 'normal'
                      }
                  },
                  title: {
                      text: 'Crypto Exchange Volumes'
                  },
                  series: chartData,
                  xAxis: {
                    type: 'datetime'
                  },
                  legend: {
                      enabled: true
                  }
              });
          }
      });

      

